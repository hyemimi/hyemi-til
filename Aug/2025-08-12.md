# 🧾TIL

## 날짜: 2025-08-12 🌊

## 새로 배운 내용

# 동시성 모드란

React가 동기적으로 렌더링을 수행 했었던 이전의 버전과 달리,

동시성 모드는 비동기적으로 여러 동작을 수행하면서, 중간에 더 중요한 작업이 들어오면 우선 순위를 바꿔서 동작을 수행하도록 하는 기능입니다.

# 사용 방법

대표적으로 React 18의 `startTransition` , `useDeferredValue` 가 있습니다. 이는 React의 스케줄러가 업데이트 우선순위를 낮춰서, 급한 UI 작업 등을 먼저 처리 후 남는 시간에 반영하는 방법입니다.

---

- `startTransition`
  - React 18에서 추가된 API로, UI 업데이트 중에서 급하지 않은 업데이트를 지정할 때 쓰는 함수입니다.
  ```jsx
  import { startTransition, useState } from "react";

  export default function SearchList() {
    const [query, setQuery] = useState("");
    const [list, setList] = useState([]);

    function handleChange(e) {
      const value = e.target.value;
      setQuery(value); // 입력값 즉시 반영 (높은 우선순위)

      startTransition(() => {
        // 무거운 목록 필터링은 저우선순위로
        const filtered = hugeData.filter((item) => item.includes(value));
        setList(filtered);
      });
    }

    return (
      <>
        <input value={query} onChange={handleChange} />
        <ul>
          {list.map((item) => (
            <li key={item}>{item}</li>
          ))}
        </ul>
      </>
    );
  }
  ```
- `useDeferredValue` 훅
  - 특정 값이 자주 바뀔 때, 그 값의 즉각 반영은 유지하면서 렌더링은 뒤로 미루는 역할을 합니다.
  ```jsx
  import { useState, useDeferredValue } from "react";

  export default function SearchList() {
    const [query, setQuery] = useState("");
    const deferredQuery = useDeferredValue(query); // query의 지연 버전
    const list = hugeData.filter((item) => item.includes(deferredQuery));

    return (
      <>
        <input value={query} onChange={(e) => setQuery(e.target.value)} />
        <ul>
          {list.map((item) => (
            <li key={item}>{item}</li>
          ))}
        </ul>
      </>
    );
  }
  ```
  query의 지연 버전은 deferredQuery로 받아서, 필터할 때 사용했습니다.

# 언제 필요할까?

사용할 수 있는 실제 예시로는, 검색에서 필터링이나 자동 완성 기능이 있습니다. 사용자가 입력하는 작업을 우선적으로 처리하고, 검색 결과를 보여주는 작업은 백그라운드에서 실행해 입력이 빠르고 부드럽게 유지될 수 있습니다.

## 오늘의 회고

React 렌더링 과정을 직접 뜯어보았던 적이 있는데, 그때 동기적 렌더링만 보았고 스케줄링이 포함된

렌더링은 보지 못했다. 그러던 중 오늘 매일메일로부터 받은 주제는 React 동시성 모드였는데,

아마 이것과 관련한 내용인 것 같다. 우선순위를 낮추어 다른 중요한 작업을 먼저 수행하도록 처리하는 것이 핵심이다.

특히 검색어 필터나 자동 완성 기능 등을 구현할 때 고려해보면 좋을 기능인 것 같다.
