# ğŸ§¾TIL

## ë‚ ì§œ: 2025-08-31 ğŸ£

## ìƒˆë¡œ ë°°ìš´ ë‚´ìš©

# Effect

ë Œë”ë§ í›„ ì¼ì–´ë‚˜ëŠ” ë¶€ìˆ˜ íš¨ê³¼. ì»¤ë°‹ ê³¼ì • ì´í›„ ëª¨ë“  effectê°€ ì‹¤í–‰ëœë‹¤.

Reactì—ê²Œ Effectë¥¼ **ë¶ˆí•„ìš”í•˜ê²Œ ë‹¤ì‹œ ì‹¤í–‰í•˜ì§€ ì•Šë„ë¡ ì§€ì‹œ**í•˜ë ¤ë©´ `useEffect` í˜¸ì¶œì˜ ë‘ ë²ˆì§¸ ì¸ìë¡œ _ì˜ì¡´ì„±(dependencies)_ ë°°ì—´ì„ ì§€ì •í•˜ë©´ ëœë‹¤.

ì˜ì¡´ì„± ë°°ì—´ì—ëŠ” effect ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ë°˜ì‘í˜• ê°’ì„ ë„£ì–´ì•¼ í•œë‹¤.

```tsx
useEffect(() => {
  // ëª¨ë“  ë Œë”ë§ í›„ì— ì‹¤í–‰ë©ë‹ˆë‹¤
});

useEffect(() => {
  // ë§ˆìš´íŠ¸ë  ë•Œë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤ (ì»´í¬ë„ŒíŠ¸ê°€ ë‚˜íƒ€ë‚  ë•Œ)
}, []);

useEffect(() => {
  // ë§ˆìš´íŠ¸ë  ë•Œ ì‹¤í–‰ë˜ë©°, *ë˜í•œ* ë Œë”ë§ ì´í›„ì— a ë˜ëŠ” b ì¤‘ í•˜ë‚˜ë¼ë„ ë³€ê²½ëœ ê²½ìš°ì—ë„ ì‹¤í–‰ë©ë‹ˆë‹¤
}, [a, b]);
```

# ì´ë²¤íŠ¸ì™€ì˜ ë¹„êµ

ë‘˜ ë‹¤ ë Œë”ë§ ê³¼ì •ì—ì„œ ë°œìƒí•˜ì§€ ì•Šì§€ë§Œ,

ì´ë²¤íŠ¸ì™€ ë‹¬ë¦¬ EffectëŠ” íŠ¹ì • ìƒí˜¸ì‘ìš©ì´ ì•„ë‹Œ ë Œë”ë§ ìì²´ì— ì˜í•´ ë°œìƒ, ë Œë”ë§ì´ ëë‚œ í›„ ì‹¤í–‰.

# ì‚¬ìš© ì´ìœ 

ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”.

**ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ìš©ìì—ê²Œ í‘œì‹œë˜ì—ˆê¸° _ë•Œë¬¸ì—_ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ì½”ë“œì—ë§Œ Effectë¥¼ ì‚¬ìš©í•˜ì.**

# í´ë¦°ì—… í•˜ê¸°

- ë°ì´í„° íŒ¨ì¹­

```tsx
useEffect(() => {
  let ignore = false;

  async function startFetching() {
    const json = await fetchTodos(userId);
    if (!ignore) {
      setTodos(json);
    }
  }

  startFetching();

  return () => {
    ignore = true;
  };
}, [userId]);
```

íŒ¨ì¹˜ í•˜ëŠ” ë™ì•ˆ ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ ë˜ëŠ” ê²½ìš°ë¥¼ ëŒ€ë¹„í•˜ì—¬ í´ë¦°ì—… ë¡œì§ì„ ì¶”ê°€í•´ì¤€ë‹¤.

# Effect ë‚´ì—ì„œ ë°ì´í„°ë¥¼ íŒ¨ì¹˜í•˜ëŠ” ê²ƒì— ëŒ€í•˜ì—¬

- **Effect ì•ˆì—ì„œ ì§ì ‘ ê°€ì ¸ì˜¤ë©´ â€œë„¤íŠ¸ì›Œí¬ í­í¬â€ë¥¼ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.**Â ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ë©´ ì¼ë¶€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³  ìì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•œ ë‹¤ìŒ ê·¸ë“¤ì´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ì‹œì‘í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ê°€ ë¹ ë¥´ì§€ ì•Šìœ¼ë©´ ì´ëŠ” ëª¨ë“  ë°ì´í„°ë¥¼ ë³‘ë ¬ë¡œ ê°€ì ¸ì˜¤ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ëŠë¦½ë‹ˆë‹¤.
- **Effect ì•ˆì—ì„œ ì§ì ‘ ê°€ì ¸ì˜¤ëŠ” ê²ƒì€ ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ë¡œë“œí•˜ê±°ë‚˜ ìºì‹œí•˜ì§€ ì•ŠìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.**Â ì˜ˆë¥¼ ë“¤ì–´ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œë˜ê³  ë‹¤ì‹œ ë§ˆìš´íŠ¸ë˜ë©´ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.

â€”> useEffect ë‚´ì—ì„œ ë°ì´í„° íŒ¨ì¹­ í•˜ëŠ” ê²ƒì„ ì£¼ë¡œ í–ˆì—ˆëŠ”ë°, ì´ëŸ¬ë©´ ìºì‹± ì—†ì´ ìˆœì„œëŒ€ë¡œ ëª¨ë“  ë°ì´í„°ë¥¼ ë¶€ëª¨ë Œë”ë§ í›„ ìì‹ ì»´í¬ë„ŒíŠ¸ ìˆœìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸° ì‹œì‘í•œë‹¤.

# ì˜¬ë°”ë¥¸ ì‚¬ìš©

```tsx
import { useMemo, useState } from "react";

function TodoList({ todos, filter }) {
  const [newTodo, setNewTodo] = useState("");
  // âœ… todosë‚˜ filterê°€ ë³€ê²½ë˜ì§€ ì•ŠëŠ” í•œ getFilteredTodos()ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
  const visibleTodos = useMemo(
    () => getFilteredTodos(todos, filter),
    [todos, filter]
  );
  // ...
}
```

todosê°€ ë°”ë€Œë©´ ì»´í¬ë„ŒíŠ¸ëŠ” ì–´ì©Œí”¼ ë¦¬ë Œë”ë§ ëœë‹¤.

í•„í„°ëœ ëª©ë¡ì„ ì—…ë°ì´íŠ¸í•´ì•¼ í•  ë•Œ, stateë¥¼ ì“°ì§€ ë§ê³  ë Œë”ë§ ê³¼ì •ì—ì„œ ë°”ë¡œ ê³„ì‚°í•´ ì €ì¥í•œë‹¤.

useMemoë¥¼ ì“°ë©´ ë¶ˆí•„ìš”í•œ ì—°ì‚°ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤. ë¦¬ë Œë”ë§ ë˜ì—ˆì„ ë•Œ, todosë‚˜ filterê°€ ë°”ë€Œì—ˆì„ ë•Œë§Œ í•„í„°ëœ íˆ¬ë‘ë¥¼ ì–»ì–´ì˜¤ëŠ” ê²ƒì´ë‹¤.

- effectë¥¼ ì—°ì‡„ì ìœ¼ë¡œ ì‚¬ìš©í•´ì„œ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë‚´ì—ì„œ ì²˜ë¦¬

```tsx
function Game() {
  const [card, setCard] = useState(null);
  const [goldCardCount, setGoldCardCount] = useState(0);
  const [round, setRound] = useState(1);

  // âœ… ë Œë”ë§ ì¤‘ì— ê°€ëŠ¥í•œ ê²ƒì„ ê³„ì‚°í•©ë‹ˆë‹¤.
  const isGameOver = round > 5;

  function handlePlaceCard(nextCard) {
    if (isGameOver) {
      throw Error('Game already ended.');
    }

    // âœ… ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ë‹¤ìŒ stateë¥¼ ëª¨ë‘ ê³„ì‚°í•©ë‹ˆë‹¤.
    setCard(nextCard);
    if (nextCard.gold) {
      if (goldCardCount <= 3) {
        setGoldCardCount(goldCardCount + 1);
      } else {
        setGoldCardCount(0);
        setRound(round + 1);
        if (round === 5) {
          alert('Good game!');
        }
      }
    }
  }

  // ...
```

ì´ë ‡ê²Œ ë˜ë©´ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì˜ ëª¨ë“  ì½”ë“œë¥¼ ìˆ˜í–‰ í›„ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ëœë‹¤.

ì»´í¬ë„ŒíŠ¸ê°€Â *í‘œì‹œë˜ì–´*Â ì‹¤í–‰ë˜ëŠ” ì½”ë“œëŠ” Effectì— ìˆì–´ì•¼ í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ì´ë²¤íŠ¸ì— ìˆì–´ì•¼ í•œë‹¤.
ê·¸ë¦¬ê³  ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì˜ stateë¥¼ ì—…ë°ì´íŠ¸í•´ì•¼ í•˜ëŠ” ê²½ìš° ë‹¨ì¼ ì´ë²¤íŠ¸ ì¤‘ì— ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

- ì¡°ê¸ˆ ì–´ë ¤ì› ë˜ ì˜ˆì‹œ â†’ key ë¥¼ ë‹¤ë¥´ê²Œ ì£¼ì–´ ìƒíƒœ ë¶„ë¦¬

```tsx
import { useState } from "react";

export default function EditContact(props) {
  return <EditForm {...props} key={props.savedContact.id} />;
}

function EditForm({ savedContact, onSave }) {
  const [name, setName] = useState(savedContact.name);
  const [email, setEmail] = useState(savedContact.email);

  return (
    <section>
      <label>
        Name:{" "}
        <input
          type="text"
          value={name}
          onChange={(e) => setName(e.target.value)}
        />
      </label>
      <label>
        Email:{" "}
        <input
          type="email"
          value={email}
          onChange={(e) => setEmail(e.target.value)}
        />
      </label>
      <button
        onClick={() => {
          const updatedData = {
            id: savedContact.id,
            name: name,
            email: email,
          };
          onSave(updatedData);
        }}
      >
        Save
      </button>
      <button
        onClick={() => {
          setName(savedContact.name);
          setEmail(savedContact.email);
        }}
      >
        Reset
      </button>
    </section>
  );
}
```

## ì˜¤ëŠ˜ì˜ íšŒê³ 

effectì— ëŒ€í•´ì„œ ê³µì‹ ë¬¸ì„œë¥¼ ì½ì–´ ë³´ë©° ê³µë¶€í–ˆë‹¤. effect ë‚´ë¶€ì˜ ë°˜ì‘í˜• ê°’ì€ ì˜ì¡´ì„± ë°°ì—´ì— ë„£ì–´ ë™ê¸°í™”í•˜ë„ë¡ í•œë‹¤.

effectëŠ” ë Œë”ì™€ ì»¤ë°‹ì„ ê±°ì³ ë§ˆì§€ë§‰ì— í•œêº¼ë²ˆì— ì‹¤í–‰ë˜ë©°, ì˜ì¡´ì„± ë°°ì—´ì— ë”°ë¼ ì‹¤í–‰ ì—¬ë¶€ë¥¼ ê²°ì •í•œë‹¤.

ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì™€ ë¹„ìŠ·í•˜ì§€ë§Œ, ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ì‚¬ìš©ìì˜ ìƒí˜¸ì‘ìš©ì— ë”°ë¼ ìˆ˜í–‰í•˜ëŠ” ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ì²˜ë¦¬í•  ë•Œ ì¢‹ê³ ,

effectëŠ” ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì§€ëŠ” í™”ë©´ì´ ë³´ì—¬ì§ì— ë”°ë¼ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” ê²ƒë“¤ì„ ì²˜ë¦¬í•  ë•Œ ì‚¬ìš©í•œë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ì‚¬ìš©ìê°€ ì±„íŒ…ë°©ì— ì ‘ì†í•´ ì±„íŒ…ë°©ì— ìë™ìœ¼ë¡œ ì—°ê²°ë˜ì–´ì•¼ í•  ë•Œ ë“±ì´ ìˆë‹¤.

ë˜ ìƒˆë¡­ê²Œ ì•Œê²Œ ëœ ê²ƒì€, effect ë‚´ë¶€ì—ì„œ ë°ì´í„°ë¥¼ íŒ¨ì¹˜í•˜ëŠ” ê²ƒì€ ë¶€ìˆ˜íš¨ê³¼ì— ë”°ë¼ ë¶€ëª¨ -> ìì‹ ìˆœì„œëŒ€ë¡œ

ë Œë”ë§ í›„ ë°ì´í„°ë¥¼ íŒ¨ì¹˜í•˜ë„ë¡ í•˜ë¯€ë¡œ ë„¤íŠ¸ì›Œí¬ í­í¬(?) í˜„ìƒì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒ .. !

ëª¨ë‘ ì–´ë µì§€ë§Œ ì¬ë°ŒëŠ” ë‚´ìš©ì´ì—ˆë‹¤.
