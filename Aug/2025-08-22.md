# 🧾TIL

## 날짜: 2025-08-22 ❤️‍🔥

## 새로 배운 내용

### requestAnimationFrame이란?

- 브라우저에서 애니메이션을 구현할 때 사용하는 비동기 API

- setTimeout이나 setInterval과 달리, **브라우저의 리페인트 주기(대개 60FPS → 16.7ms)**에 맞춰 콜백 실행

- CPU와 GPU의 리소스를 효율적으로 사용하고, 불필요한 렌더링을 줄여 부드러운 애니메이션을 구현할 수 있다.

```js
function animate() {
  // 애니메이션 로직
  box.style.transform = `translateX(${Date.now() % 300}px)`;

  requestAnimationFrame(animate); // 다음 프레임 예약
}

requestAnimationFrame(animate);
```

### setInterval, setTimeout과의 차이

| 항목             | `requestAnimationFrame`                      | `setTimeout` / `setInterval`    |
| ---------------- | -------------------------------------------- | ------------------------------- |
| 실행 주기        | 브라우저 리페인트 주기 (보통 60FPS = 16.7ms) | 지정한 밀리초 간격              |
| 프레임 드랍      | 브라우저가 최적화해서 최소화                 | 정확히 맞지 않아 끊김 발생 가능 |
| 비활성화 탭 동작 | 자동 일시 정지 (리소스 절약)                 | 여전히 실행되어 CPU 소모        |
| 콜백 제공 값     | timestamp (고해상도 시간)                    | 없음                            |
| 주 사용처        | 애니메이션                                   | 단순 반복 실행, 지연 실행       |

또한 requestAnimationFrame은 렌더링 직전에 실행되는 반면

setTimeout 같은 비동기 함수의 경우 매크로 태스크 큐에 있다가 콜스택이 비어 있을 때 실행하므로

정확도가 낮고, 렌더링 시점과 동기화되지 않을 수 있다.

## 오늘의 회고

부드럽게 움직이는 애니메이션을 구현하기 위한 방법을 공부하다 requestAnimationFrame에 대해서 정리해보았다.

이벤트 루프의 동작 원리와도 더 연관 지어서 정리해보면 좋을 것 같다!
