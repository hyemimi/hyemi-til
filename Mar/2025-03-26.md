# 🧾TIL
## 날짜: 2025-03-26 🎂

## 새로 배운 내용

## TCP 연결 종료 과정 (4-way handshake)

클라이언트 → 서버 : `FIN 패킷 전송` 

서버 → 클라이언트 : `ACK 패킷 전송` 

서버 → 클라이언트 : `FIN 패킷 전송` 

클라이언트 → 서버 : `ACK 패킷 전송` 

이 과정에서 클라이언트가 ACK 패킷을 전송하고 일정 시간 동안 `TIME-WAIT` 상태에 머문다.

## TIME-WAIT 이유

1. **안전한 종료**
    
    클라이언트가 마지막으로 ACK 패킷을 전송 했지만 도달하지 못한 경우, 서버는 FIN 패킷을 재전송할 수 있다. 따라서 이에 대비해서 ACK 패킷을 재전송하기 위해, 대기 상태에 머문다. 
    
2. **중복 패킷 방지**
    
    이전 연결 중 지연된 패킷들이 새로운 연결에 영향을 주는 것을 방지한다.
    
    따라서 **MSL(Maximum Segment Lifetime, 패킷이 살아남을 최대 시간)동안 기다린다.**


## 오늘의 회고

TCP 연결 과정 중 3-way handshake는 SYN, SYN-ACK, ACK의 과정으로 진행된다면 (클라이언트, 서버, 클라이언트)

4-way handshake는 종료 과정시 발생하며 FIN, ACK, FIN, ACK 순서로 진행된다. (클라이언트, 서버, 서버, 클라이언트)

이때 클라이언트는 ACK 패킷을 전송한 이후 TIME-WAIT 상태에 도달하는데 그 이유는 혹시 ACK 패킷이 서버에 전송되지 않아 다시 ACK 패킷을 전송할 경우를 대비하기 위함이고

또, 지연된 패킷이 새로운 연결에 영향을 주는 것을 막기 위함이다. 이때 사용된 포트는 완전히 종료될 때까지 사용할 수 없다.

오늘은 4-way handshake에 대해 배웠다.

3-way handshake는 알고 있었지만 종료 과정에 대해서는 잘 알지 못했는데 이 기회에 정리하게 되어 다행이다.

그리고 !! 오늘은 내 생일이다 🎂🎉 (사실 노느라 개발 많이는 못했다.)

많은 친구들이 축하해줘서 너무 기분이 좋았고, 나도 더 잘해야겠다는 생각이 들었다.

또 고등학교때 나를 많이 챙겨줬던 친구에게 생일 축하 연락이 왔다.

너무나도 기분이 좋았고, 감동적이었다😭 나도 누군가에게 다가갈 줄 아는 사람이 되어야지..


