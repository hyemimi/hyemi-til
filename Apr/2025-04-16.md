# 🧾TIL
## 날짜: 2025-04-16

## 1차 - Next.js 선택

> **특징**
> 
1. **FCP 단축 → 사용자 경험 향상**
    
    React의 `CSR`의 경우, 초기 로딩 시 서버로부터 받은 모든 JS Bundle을 다운 받아 실행시켜야 해서 FCP가 늦어지게 된다(= 흰 화면이 보여지게 된다).
    
    반면 사전렌더링의 경우 서버 측에서 JS를 실행해 브라우저에 전송, 빠르게 사용자에게 보여지게 되므로 사용자 경험 향상에 좋다.
    
2. **(서버 컴포넌트 RSC) TTI 단축 → 사용자 경험 향상**
    
    Next.js의 13버전부터 서버 컴포넌트(RSC)를 지원한다. 
    
    서버 컴포넌트는 서버에서 js를 실행하고 렌더링한다. 이때, SSR과 달리 브라우저에 필요한 js bundle을 전송하지 않아, 브라우저가 다운 받을 js의 양을 줄인다. 
    
    결론적으로 사용자가 hydration 과정을 거쳐 인터랙션할 수 있을 때까지의 시간을 단축시킬 수 있다.
    
    hydration이 필요한 작업은 클라이언트 컴포넌트, hydration이 필요 없는 작업은 서버 컴포넌트에 구성해 사용자 경험 향상을 도모한다.
    
3. **이미지 최적화 기능 내장**
    
    Next.js에서는 강력한 이미지 최적화 기능을 내장하고 있으며, 아래와 같은 기능들이 있다.
    
    | 기능 | 설명 |
    | --- | --- |
    | **자동 리사이징** | 브라우저 뷰포트에 맞춰 적절한 크기로 변경 |
    | **WebP 등 포맷 변환** | 브라우저가 지원하면 WebP 등 더 효율적인 포맷으로 자동 변환 |
    | **지연 로딩 (Lazy Loading)** | 화면이 보여지기 전까지 이미지 리소스를 나중에 다운로드 |
    | **blur-up placeholder** | 이미지 로딩 전 저화질 미리보기(블러 효과) 지원 |
    
    주로 수동으로 처리해주어야 하는 것들을 Next.js에서는 내장된 next/image를 불러 오는 것만으로도 손쉽게 설정, 사용할 수 있다. <Koco>에서는 유저의 프로필, 게시글에 이미지를 업로드한다.
    
4. **SEO 유리**
    
    비어 있는 HTML 파일을 받아 브라우저에서 JS를 실행해야 하는 React CSR과 달리, 서버에서 미리 HTML을 렌더링하면 크롤링 봇에 노출될 가능성이 더 높다.
    
    실제로도 네이버의 SEO 정책에 따르면 중요 컨텐츠의 경우 서버 사이드 도입을 권장하고 있다.
    
    카카오테크 부트캠프 수강생을 대상으로 하고 있는 서비스이기 때문에 SEO는 우선순위가 낮지만, 추후 타 교육 서비스로의 확장을 고려중이기 때문에 충분한 이점이 될 것으로 판단된다.
    

> **타 기술 스택과의 비교 (사전렌더링)**
> 

| 프레임워크 | 사전 렌더링 전략 | 특징 |
| --- | --- | --- |
| **Next.js** | ✅ SSG / SSR / ISR / RSC | 강력한 렌더링 전략 + 자동 코드 스플리팅 |
| **React (CRA)** | ❌ CSR only | `react-snap`, `vite-plugin-ssr` 등 별도 구성 필요 |
| **Nuxt (Vue)** | ✅ SSG / SSR (ISR 불가) | Nuxt3로 개선되었지만 설정은 Next보단 불편 |
| **Angular (Universal)** | ✅ SSR 가능 (SSG 불편) | 설정 무거움 + 성능 최적화 어려움 |

`React`의 경우 별도의 라이브러리나, vite와 함께 플러그인을 사용하면 SSR을 구현할 수 있다. 

하지만 애초에 Next.js가 React 기반의 프레임워크이므로, 강력한 사전 렌더링 기능 및 기타 편리한 기능들을 사용하기 위해 Next.js를 사용한다고 볼 수 있겠다.

`Nuxt`와 `Angular` 는 사전 렌더링을 지원하긴 하지만 Next.js보다 더 다양한 사전 렌더링 전략(ISR, RSC)을 지원하지 않는다.

> **Next.js 버전 선택**
> 

|  | 사전 렌더링 방법 | 장점 | 단점 |
| --- | --- | --- | --- |
| 페이지 라우터
(~v12) | SSR, SSG, ISR | 1️⃣상황에 맞는 다양한 사전 렌더링 방식과 옵션 존재
2️⃣ 직관적인 파일시스템 기반 라우팅 | 페이지 별 레이아웃 적용 복잡, hydration을 위해 다운 받게 되는 JS bundle의 양이 많아 TTI가 길어짐 |
| 앱 라우터
(v13~) | 서버 컴포넌트(RSC), SSR, SSG, ISR | 1️⃣ 페이지 별 레이아웃을 쉽게 작성 
2️⃣ TTI 단축 가능 | 러닝 커브 존재
서버 컴포넌트, 클라이언트 컴포넌트로 나누어 복잡한 코드 구성
서버 컴포넌트는 react hook 사용 불가, 이벤트 등록 불가 |

Next.js의 앱 라우터, 서버 컴포넌트 기반 사전 렌더링을 적극 사용하기 위해 14 버전으로 개발한다.

## 오늘의 회고
Next.js를 사용해야 하는 이유를 기반으로 설계 문서 1차안을 작성하였다.