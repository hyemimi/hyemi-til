# 🧾TIL

## 날짜: 2025-09-04 🐣

# 전역 상태 관리 라이브러리 사용 이점

1. **컴포넌트 간 상태 공유 용이**

   부모 → 자식간 props drilling을 겪지 않고 상태에 바로 접근할 수 있다.

2. 관심사 분리

   상태 관리 로직을 컴포넌트에서 분리하여 별도로 관리 → 컴포넌트는 UI에 집중 → 테스트 및 재사용 용이

3. 성능 최적화

   필요한 컴포넌트 파일에서만 상태에 접근, 리렌더링 최적화.

   Zustand는 구독한 컴포넌트들만 상태 변경 되었을 때 리렌더링 되도록 한다.

# 그럼 항상 사용하면 좋은가? 그건 아니다.

재미있는 블로그 글을 읽었다. https://velog.io/@woohm402/no-global-state-manager?utm_source=oneoneone

내용을 정리하면 아래와 같다.

### 1. 데이터를 주입하는 곳과 사용하는 곳의 연결성이 없어진다.

props를 통해 부모 → 자식으로 drilling 해 넘겨주는 기존의 방식과 비교했을 때, 전역 상태 관리 라이브러리는 바로 접근할 수 있다. 따라서 **만약 기획이 바뀌어서 해당 데이터를 사용하는 모든 컴포넌트들을 수정해야 한다면 일일이 찾아 수정 해주어야 할 것이다.**

### 2. 컴포넌트의 역할이 복잡하고 재사용하기 어렵다.

이 부분은 사실 이해를 잘 못해서 납득하지 못했다 ..!

### 3. 상태의 타입이 좁혀지지 않는다.

전역 상태 라이브러리로부터 얻는 데이터가 초기에는 없었을 것이므로 undefined 타입도 정의해주어야 한다.

반면 props를 통해 얻는 경우 undefined 타입을 정의하지 않아도 된다.

### 4. 핸들러의 타입이 좁혀지지 않는다.

특정 컴포넌트에 특정 동작을 하는 핸들러를 props로 넘겨서 역할을 확실히 하는 경우에 반면, 전역 상태 관리 라이브러리를 사용하면 dispatch로 다양한 action을 수행할 수 있게 된다.

### 5. 상태 초기화 로직 필요

페이지 이동 시 초기화가 필요하다면 아래와 같이 clean up 해주어야 한다. 로컬 상태(`useState`)였다면 컴포넌트가 언마운트 되면 상태가 사라지므로 그럴 필요가 없다.

```tsx
useEffect(() => {
  return () => dispatch({ type: "clearTodos" });
}, []);
```

### 6. 컴포넌트가 너무 큰 권한을 가지게 되어 버그 가능성이 커진다.

모든 컴포넌트가 전역 상태에 접근할 수 있다면 버그가 발생하기 쉽다. 단 로컬 상태 + props로 데이터를 넘기게 된다면 데이터에 접근할 수 있는 주체가 명확해진다.

## 오늘의 회고

나 또한 프로젝트를 하면서 클라이언트 데이터를 관리하기 위해 전역 상태 관리 라이브러리는 주로 사용하지 않았는데, 그 이유에 대해서는 설명하지 못했다. "그냥 필요하지 않아서 사용 안 했다"라고 생각했는데, 오늘 다른 프론트엔드 개발자 분이 작성한 아티클을 보며 비슷한 고민을 한 적이 있었음을 깨달았다. 🤔

전역 상태 관리 라이브러리는 리렌더링을 최적화할 필요가 있을 때 사용할 수 있을 것 같고, 그렇지 않다면 굳이 사용하지 않고 로컬 상태 + props를 사용하는 것이 데이터의 흐름을 명확히 보여 유지보수를 수월하게 하고, 컴포넌트의 역할을 한정하기에 좋아 보인다.
